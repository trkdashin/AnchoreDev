---
version: '2.1'
​
services:
# Uncomment this sectionto add a prometheus instance to gather metrics. This is mostly for quickstart to demonstrate prometheus metrics exported
  prometheus:
    image: docker.io/prom/prometheus:latest
    volumes:
    - ./prometheus-config.yml:/etc/prometheus/prometheus.yml:z
    logging:
      driver: "json-file"
      options:
       max-size: 100m
    ports:
    - "9090:9090"
​
# Uncomment this section to add a grafana instance to integrate with prometheus.
  grafana:
    image: docker.io/grafana/grafana:latest
    depends_on:
    - prometheus
  #  volumes:
  #  - ./grafana.ini:/etc/grafana/grafana.ini
    logging:
      driver: "json-file"
      options:
        max-size: 100m
    ports:
      - "3001:3000"
​
# Uncomment this section to run a swagger UI service, for inspecting and interacting with the anchore engine API via a browser (http://localhost:8080 by default, change if needed in both sections below)
  swagger-ui-nginx:
    image: docker.io/nginx:latest
    depends_on:
    - swagger-ui
    ports:
      - "8083:8080"
    volumes:
    - ./swaggerui-nginx.conf:/etc/nginx/nginx.conf:z
    logging:
      driver: "json-file"
      options:
        max-size: 100m
  swagger-ui:
    image: docker.io/swaggerapi/swagger-ui
    environment:
    - URL=http://localhost:8083/v1/swagger.json
    logging:
      driver: "json-file"
      options:
        max-size: 100m
​
# Uncomment this section to add a pgadmin instance to interacte with anchore-db
  pgadmin:
    image: docker.io/dpage/pgadmin4:latest
    logging:
      driver: "json-file"
      options:
        max-size: 100m
    ports:
      - "8082:80"
    environment:
      - PGADMIN_DEFAULT_EMAIL=blang@anchore.com
      - PGADMIN_DEFAULT_PASSWORD=foobar
