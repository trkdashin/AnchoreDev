---
version: '2.1'
services:
  prometheus:
    image: docker.io/prom/prometheus:latest
    volumes:
    - ./prometheus-config.yml:/etc/prometheus/prometheus.yml:z
    logging:
      driver: "json-file"
      options:
       max-size: 100m
    ports:
      - "9090:9090"

  grafana:
    image: docker.io/grafana/grafana:latest
    depends_on:
    - prometheus
    volumes:
    - ./grafana.ini:/etc/grafana/grafana.ini
    logging:
      driver: "json-file"
      options:
        max-size: 100m
    ports:
      - "3001:3000"
​
  swagger-ui-nginx:
    image: docker.io/nginx:latest
    depends_on:
    - swagger-ui
    ports:
      - "8083:8080"
    volumes:
    - ./swaggerui-nginx.conf:/etc/nginx/nginx.conf:z
    logging:
      driver: "json-file"
      options:
        max-size: 100m

  swagger-ui:
    image: docker.io/swaggerapi/swagger-ui
    environment:
      - URL=http://localhost:8083/v1/swagger.json
    logging:
      driver: "json-file"
      options:
        max-size: 100m
​
  pgadmin:
    image: docker.io/dpage/pgadmin4:latest
    logging:
      driver: "json-file"
      options:
        max-size: 100m
    ports:
      - "8082:80"
    environment:
      - PGADMIN_DEFAULT_EMAIL=blang@anchore.com
      - PGADMIN_DEFAULT_PASSWORD=foobar
